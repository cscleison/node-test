name: Pull Request Workflow
on:
  pull_request:
    types: [labeled, unlabeled, opened, reopened, synchronize]

jobs:
  validate-pr:
    name: Validate Release Label
    runs-on: ubuntu-20.04
    steps:
      - uses: actions/checkout@v2

      - uses: actions/github-script@v6
        with:
          script: |
            console.log(context.payload?.pull_request?.labels)

      - uses: actions-ecosystem/action-release-label@v1
        id: release-label

      - if: ${{ steps.release-label.outputs.level == null }}
        uses: actions/github-script@v6
        with:
          script: core.setFailed('You must specify a release label level (major, minor or patch)')
